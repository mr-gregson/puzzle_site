{% extends "base.html" %}
{% block content %}
<h2>Manage Puzzles</h2>

<div class="admin-header">
    <a href="{{ url_for('admin.add_puzzle') }}" class="action-btn">Add New Puzzle</a>
    <a href="{{ url_for('admin.dashboard') }}" class="action-btn">Back to Dashboard</a>
</div>

<table>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Issue</th>
        <th>Created</th>
        <th>Actions</th>
    </tr>
    {% for puzzle in puzzles %}
    <tr>
        <td>{{ puzzle.id }}</td>
        <td>{{ puzzle.title }}</td>
        <td>{{ puzzle.issue.title if puzzle.issue else 'No Issue' }}</td>
        <td><span data-utc-datetime="{{ puzzle.created_at.strftime('%Y-%m-%d %H:%M:%S') }}" data-format="date">{{ puzzle.created_at.strftime('%Y-%m-%d') }}</span></td>
        <td>
            <a href="{{ url_for('admin.edit_puzzle', puzzle_id=puzzle.id) }}">Edit</a> |
            <a href="{{ url_for('admin.delete_puzzle', puzzle_id=puzzle.id) }}" 
               onclick="return confirm('Are you sure you want to delete this puzzle?')">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% if not puzzles %}
<p>No puzzles found. <a href="{{ url_for('admin.add_puzzle') }}">Create your first puzzle</a>.</p>
{% endif %}

{% endblock %}